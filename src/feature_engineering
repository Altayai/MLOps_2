import pandas as pd
from pathlib import Path

# Dosya yollarÄ±
clean_path = Path("data/processed/clean_data.csv")
processed_dir = Path("data/processed")
processed_dir.mkdir(parents=True, exist_ok=True)

# Veri setini oku
df = pd.read_csv(clean_path)

print("ğŸ“Š Temiz veri boyutu:", df.shape)

# ---------------------------
# ğŸ”¹ Ã–zellik mÃ¼hendisliÄŸi
# ---------------------------
# 1. Sepal alanÄ± = sepal length * sepal width
df["sepal_area"] = df["sepal length (cm)"] * df["sepal width (cm)"]

# 2. Petal alanÄ± = petal length * petal width
df["petal_area"] = df["petal length (cm)"] * df["petal width (cm)"]

# 3. Petal oranÄ± = petal length / (petal width + kÃ¼Ã§Ã¼k epsilon)
df["petal_ratio"] = df["petal length (cm)"] / (df["petal width (cm)"] + 1e-6)

# 4. Sepal/Petal uzunluk oranÄ±
df["sepal_petal_length_ratio"] = df["sepal length (cm)"] / (df["petal length (cm)"] + 1e-6)

# Sonucu kaydet
feature_path = processed_dir / "feature_data.csv"
df.to_csv(feature_path, index=False)

print(f"âœ… Ã–zellik mÃ¼hendisliÄŸi tamamlandÄ±, kaydedildi: {feature_path}")
